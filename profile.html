<!doctype html>
<html lang="pt-BR"><head><meta charset="utf-8"/><meta name="viewport" content="width=device-width,initial-scale=1"/><title>Perfil</title><script src="https://cdn.tailwindcss.com"></script></head><body class="bg-[#0d1117] text-[#c9d1d9] p-6">
<a href="chat.html" class="text-sm text-gray-400 hover:text-white mb-4 block">&larr; Voltar ao Chat</a>
<h2 class="text-lg mb-3">Perfil do UsuÃ¡rio</h2>
<div id="info" class="bg-[#111318] p-4 rounded"></div>
<script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/12.5.0/firebase-app.js";
import { getDatabase, ref, get, onValue } from "https://www.gstatic.com/firebasejs/12.5.0/firebase-database.js";
import { getAuth, signInAnonymously } from "https://www.gstatic.com/firebasejs/12.5.0/firebase-auth.js";
const firebaseConfig = {
  "apiKey": "AIzaSyDAQS7qpWTDH7itAgn1eAJIeLOfVxy__cM",
  "authDomain": "chat-firebase-efcbe.firebaseapp.com",
  "databaseURL": "https://chat-firebase-efcbe-default-rtdb.firebaseio.com",
  "projectId": "chat-firebase-efcbe",
  "storageBucket": "chat-firebase-efcbe.firebasestorage.app",
  "messagingSenderId": "376919463932",
  "appId": "1:376919463932:web:4b2139df551d0a026ac479",
  "measurementId": "G-R14XVTJBFL"
};
const app = initializeApp(firebaseConfig);
const db = getDatabase(app);
const auth = getAuth(app);

signInAnonymously(auth).catch((e)=>{ console.error("Erro na autenticaÃ§Ã£o anÃ´nima:", e); });

const uid = localStorage.getItem('chat_user_uid');
if(!uid) location.href='index.html';

onValue(ref(db, `users/${uid}`), async (userSnap) => {
    if(!userSnap.exists()) return; 
    const u = userSnap.val();
    
    const statusSnap = await get(ref(db, `status/${uid}`));
    const status = statusSnap.exists() ? statusSnap.val() : null;
    const adminSnap = await get(ref(db, `admins/${uid}`));
    const isAdmin = adminSnap.exists() && adminSnap.val() === true;

    const statusText = status && status.state === 'online' ? 
        '<span class="text-green-500">ğŸŸ¢ Online</span>' : 
        `<span class="text-red-500">ğŸ”´ Offline</span>`;
        
    document.getElementById('info').innerHTML = `
        <p class="mb-2"><strong>Nome de UsuÃ¡rio:</strong> ${u.username}</p>
        <p class="mb-2"><strong>Status:</strong> ${statusText}</p>
        <p class="mb-2"><strong>FunÃ§Ã£o:</strong> ${isAdmin ? '<span class="text-red-400">Administrador</span>' : 'Membro'}</p>
        <p class="text-xs text-gray-500"><strong>UID:</strong> ${uid}</p>
        <p class="text-xs text-red-500 mt-2">${u.isBanned ? 'ğŸ”¨ BANIDO' : ''}${u.isBlocked ? ' | ğŸ¤« SILENCIADO' : ''}</p>
    `;
});
</script>
</body></html>
